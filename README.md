# school_schedule_api
  
Django Application created for PURE as recruitment task.  
  
Based on python 3.11 and Django 5.0.6

## How to run tests
Note: to make sure that tests will run within the first execution, I incorporated `wait-for-psql.sh` script. 

- Enter the root repository of cloned repo
- Create .env file based on example file:
	```shell 
	cp .env.example .env
	```
- Run the following command:
	```shell
	docker-compose run --rm api sh -c "/app/scripts/wait-for-psql.sh db && pytest"
	```

  
## Assumptions made during development
Note: minutes before I finished the task, I realized that the required path for the endpoint should be `GET /schedule/`,
but out of habit I prepared the path to the endpoint as follows `GET /api/v1/schedule`. I hope the reviewer will not hold it against me
- I tried to stay as close as possible to provided entities when creating models
- Based on `Class` entity, I decided to create model named `SchoolClass` model due to naming restrictions
- `GET /schedule/` contains `class.student_count` key which wasn't visible in entities from the task description.
In order to be able to count Students from a given Class I had to include foreign key to `SchoolClass` model inside `Student` model
- I decided to create only one django app (called `api`). I didn't felt that creating multiple django apps will be justified based on requirements (one endpoint with filters)
- I kept model admins minimal, it was enough during development, there were no requirements for that.
- `GET /schedule/` remained public, i.e. no auth is required. It wasn't mentioned in the task description.
- I kept all weekdays available because some works even during weekends

## What would I do if I had more time
#### General
- I'd setup CI
- I'd setup autogenerated, interactive API docs using [drf-yasg](https://github.com/axnsan12/drf-yasg/)
- I'd consider setting up static typing - [mypy](https://github.com/python/mypy)
- In a real life project, I'd make admin models more fancy
- In a real life project, I'd consider adding pagination. I intentionally skipped that to match the desired response from task description.
#### Potential improvements
- I'd consider creating another entity `SubjectTeacher` that would bind a given teacher with a given subject - support for making teachers being able to teach multiple subjects without creating multiple Subjects with the same name

	Because I mentioned earlier that I tried to stay as close as possible to provided entities and I wanted to keep things simple, I intentionally don't extended `SchoolClass` model with `student_count` field.  
	In case of database performance problems I'd consider such change, but it would require a tradeoff in form of a necessity with data synchronization  (e.g. by recalculating a `SchoolClass.student_count` after a given `Student` has been updated)
- I'd consider adding another entity called `School` and `TimeBlock` in order to support multiple schools with different schedules with different properties
